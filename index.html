<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Rat ìƒíƒœ ê°„ì´ í‰ê°€</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  font-family: Arial, sans-serif;
  padding: 20px;
  max-width: 600px;
  margin: auto;
}
h1 { text-align: center; }
h2 { margin-top: 30px; }
label { display: block; margin: 6px 0; }
.score-group label { margin-left: 10px; }
input[type="number"], textarea {
  width: 100%;
  padding: 8px;
  margin-top: 4px;
}
.total {
  font-size: 20px;
  font-weight: bold;
  margin-top: 20px;
  text-align: center;
}
button {
  margin-top: 25px;
  width: 100%;
  padding: 14px;
  font-size: 16px;
}
</style>
</head>

<body>

<h1>Rat ìƒíƒœ ê°„ì´ í‰ê°€</h1>

<label>
Cohort ë²ˆí˜¸
<input type="number" id="cohort" required>
</label>

<label>
Rat ë²ˆí˜¸
<input type="number" id="rat" required>
</label>

<h2>í™œë™ì„±</h2>
<div class="score-group" id="activity"></div>

<h2>í„¸ ìƒíƒœ</h2>
<div class="score-group" id="fur"></div>

<h2>ëˆˆ ìƒíƒœ</h2>
<div class="score-group" id="eye"></div>

<h2>íŠ¹ì´ì‚¬í•­</h2>
<textarea id="note" rows="4" placeholder="íŠ¹ì´ì‚¬í•­ì´ ìˆìœ¼ë©´ ì…ë ¥"></textarea>

<div class="total">
ì´ì : <span id="total">0</span> / 15
</div>

<button onclick="submitForm()">ì œì¶œ</button>

<script>
/* ğŸ”´ ì—¬ê¸°ì— Apps Script ì›¹ì•± URL ë¶™ì—¬ë„£ê¸° ğŸ”´ */
const scriptURL = "https://script.google.com/macros/s/AKfycbziPfOKR1yspNVlmO_dhj9bsB--bRgEJcX3-SvfCg_XCTk8fkTxnKzydgZdbvwkF-Q/exec";

/* ì ìˆ˜ ì„¤ëª… */
const descriptions = {
  activity: {
    5: "ì •ìƒ, í™œë°œí•˜ê²Œ ì›€ì§ì„",
    4: "ì•½ê°„ í™œë™ ê°ì†Œ",
    3: "ëª…í™•í•œ í™œë™ ê°ì†Œ",
    2: "ê±°ì˜ ì›€ì§ì´ì§€ ì•ŠìŒ",
    1: "ë¬´ê¸°ë ¥, ìê·¹ì—ë„ ë°˜ì‘ ê±°ì˜ ì—†ìŒ"
  },
  fur: {
    5: "ìœ¤ê¸° ìˆê³  ì •ëˆë¨",
    4: "ì•½ê°„ ê±°ì¹ ìŒ",
    3: "ê±°ì¹ ê³  ì •ëˆ ì•ˆ ë¨",
    2: "ë¶€ë¶„ íƒˆëª¨",
    1: "ì‹¬í•œ íƒˆëª¨ / í”¼ë¶€ ë…¸ì¶œ"
  },
  eye: {
    5: "ë§‘ê³  ê¹¨ë—í•¨",
    4: "ì†ŒëŸ‰ ë¶„ë¹„ë¬¼",
    3: "ë¶„ë¹„ë¬¼ ëšœë ·",
    2: "ëˆˆ ë°˜ì¯¤ ê°ê¹€",
    1: "ì‹¬í•œ ë¶„ë¹„ë¬¼ / ê±°ì˜ ê°œì•ˆ ë¶ˆê°€"
  }
};

/* ë¼ë””ì˜¤ ë²„íŠ¼ ìƒì„± */
function makeRadios(name, containerId) {
  const container = document.getElementById(containerId);
  for (let i = 5; i >= 1; i--) {
    container.innerHTML += `
      <label>
        <input type="radio" name="${name}" value="${i}" onchange="calcTotal()">
        <strong>${i}</strong> (${descriptions[name][i]})
      </label>
    `;
  }
}

makeRadios("activity", "activity");
makeRadios("fur", "fur");
makeRadios("eye", "eye");

/* ì ìˆ˜ ê³„ì‚° */
function getScore(name) {
  const el = document.querySelector(`input[name="${name}"]:checked`);
  return el ? Number(el.value) : 0;
}

function calcTotal() {
  const total =
    getScore("activity") +
    getScore("fur") +
    getScore("eye");
  document.getElementById("total").innerText = total;
}

/* ì œì¶œ */
function submitForm() {
  const cohort = document.getElementById("cohort").value;
  const rat = document.getElementById("rat").value;

  if (!cohort || !rat) {
    alert("Cohort ë²ˆí˜¸ì™€ Rat ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
    return;
  }

  if (
    getScore("activity") === 0 ||
    getScore("fur") === 0 ||
    getScore("eye") === 0
  ) {
    alert("ëª¨ë“  í‰ê°€ í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”.");
    return;
  }

  const data = {
    cohort: cohort,
    rat: rat,
    activity: getScore("activity"),
    fur: getScore("fur"),
    eye: getScore("eye"),
    total: document.getElementById("total").innerText,
    note: document.getElementById("note").value
  };

 fetch(scriptURL, {
  method: "POST",
  headers: {
    "Content-Type": "application/json"
  },
  body: JSON.stringify(data)
})
  .then(() => {
    alert("ì €ì¥ ì™„ë£Œ");
    location.reload();
  })
  .catch(() => {
    alert("ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ");
  });
}
</script>

</body>

</html>

